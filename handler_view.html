<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Handler</title>
  <style>
    html, body { margin:0; padding:0; background:#000; width:100%; height:100%; }
    img {
      display:block;
      width:100vw;
      height:100vh;
      object-fit:contain;
      background:#000;
    }
  </style>
</head>
<body>
  <img id="img" alt="handler screenshot" />
  <script>
    // Map handler -> RequestServer base URL
    const MAP = {
      "NS-5": "http://10.20.10.98:8080",
      // "NS-3": "http://10.20.10.99:8080",
      // "NS-4": "http://10.20.10.100:8080",
      // "CHROMA": "http://10.20.10.101:8080",
    };

    const REFRESH_MS = 2000; // refresh interval

    function handlerFromQS() {
      const p = new URLSearchParams(location.search);
      return (p.get("handler") || "NS-5").toUpperCase();
    }

    function baseUrl(handler) {
      return MAP[handler] || MAP["NS-5"];
    }

    function setImage() {
      const h = handlerFromQS();
      const base = baseUrl(h);
      document.getElementById("img").src = base + "/latest.png?ts=" + Date.now();
    }

    setImage();
    setInterval(setImage, REFRESH_MS);
  </script>
</body>
</html>
